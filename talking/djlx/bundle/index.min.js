/**
 * Copyright (c) 2017 - 2020 www.xiongan.gov.cn All Rights Reserved.
 * Project talking-djlx v0.1.7
 * @time 2020-12-30 23:21:47
 */

"use strict";var $$=Dom7,AJAX_url="http://da.wa.news.cn/nodeart/page",isTalkinghomepageFn=function(){var n=/is-talkinghomepage/gi.test(window.location.href);return n&&$("html").addClass("isTalkinghomepage"),n},isTalkinghomepage=isTalkinghomepageFn(),msgFn=function(n){return'\n        <a href="http://da.wa.news.cn/nodeart/page?nid='+n.cid+"&pgnum="+n.pgnum+"&cnt="+n.cnt+'&tp=1&orderby=1"\n        class="link external" target="_blank">暂无内容</a>\n    '},MAIN_url="/talking/djlx/";/index/.test(window.location.href)&&(window.location.href=MAIN_url);var cid=[{name:"精彩连线",cid:11230092,nid:11230411,nav:!0,isPage:1}];isDev&&(cid[0].cid=11208880);var cidMap=function(){var t={byName:{},byCid:{}};return cid.map(function(n){t.byCid[n.cid]=n.name,t.byName[n.name]={cid:n.cid,child:n.child},n.father&&(t.byName[n.name].father=n.father)}),t}(),txtSplitByDash=function(n){return/-/.test(n)?n.split("-").slice(-1):n},setNav=function(n){var t,a="",i={};for(t in n){var e=n[t],l="navBtn-"+e.cid,o="/page/"+e.cid;e.nav?1==e.isPage?a+='\n                    <span class="line line-'+e.cid+'"></span>\n                    <a class="link navBtn '+l+'" href="'+o+'" data-id="id-'+e.cid+'">\n                        '+e.name+"\n                    </a>\n                ":a+='\n                    <a class="link navBtn '+l+' hide" href="'+o+'" data-id="id-'+e.cid+'">\n                        '+e.name+"\n                    </a>\n                ":i[e.cid]={name:""+e.name};l=$('[data-col="'+t+'"]');l.replaceWith('\n            <a class="colA link" href="'+o+'">\n                <div class="'+l.attr("class")+'">\n                    <div class="hide">'+e.name+"</div>\n                </div>\n            </a>\n        ");e=$('[data-more="'+t+'"]');e.replaceWith('\n            <div class="more">\n                <a class="colA link" href="'+o+'"> '+e.html()+" </a>\n            </div>\n        ")}return isPc?$('[data-js="setNav(cid)"]').html('\n            <a class="link navBtn-home active" href="'+MAIN_url+'" data-id="home">首页</a>\n            '+a+"            \n        "):$('[data-js="setNav(cid)"]').html("\n            "+$(".panel-xaLogoA").prop("outerHTML")+'\n            <a class="link navBtn-home active" href="'+MAIN_url+'" data-id="home">首页</a>\n            '+a+"            \n        "),i},contentPageFn_bannerBgDom=!1,contentPageFn_navDom=!1,contentPageFn_footerDom=!1,contentPageFn=function(){return 0==contentPageFn_bannerBgDom&&(contentPageFn_bannerBgDom=$(".banner").prop("outerHTML")),0==contentPageFn_navDom&&(contentPageFn_navDom=$("#pcNav").prop("outerHTML")),0==contentPageFn_footerDom&&(contentPageFn_footerDom=$(".footer").prop("outerHTML")),'\n        <div class="page isPageBanner">\n            <div class="page-content hide-navbar-on-scroll">\n                \n                <div class="box banner-bg">\n                    '+contentPageFn_bannerBgDom+"\n                    "+contentPageFn_navDom+'\n                </div>\n\n                <div class="box">\n                    <div class="content">\n                        \x3c!-- items START --\x3e\n                        <div class="area listHasImg spListArea">\n                            <div class="spaColTitle"> </div>\n                            <div class="hasNavBox">\n                                <div class="hasNav">\n                                    \x3c!-- hasNav --\x3e\n                                </div>\n                                <div class="hasNavContentBox">\n                                    <div class="listBox">\n                                        <ul class="list isLoading" id="addDataListPos" data-cid="">\n                                            <div class="isLoadingTxt">正在努力加载...</div>\n                                        </ul>\n                                    </div>\n                                    <div class="isNoContent isNoContent"></div>\n                                    <div class="listBoxMoreBtnBox">\n                                        <div class="listBoxMoreBtn" id="addData">查看更多</div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \x3c!-- items END --\x3e\n                    </div>\n                </div>\n\n                <div class="nav mobile-nav-btn">\n                    <div class="panel-openBtnBox">\n                        <a class="panel-open btn-box button button-large button-fill color-white text-color-red" href="#" data-panel="right">\n                            <i class="f7-icons" data-panel="right">bars</i>\n                        </a>\n                    </div>\n                </div>\n\n                \x3c!-- js footer START --\x3e\n                '+contentPageFn_footerDom+"\n                \x3c!-- js footer END --\x3e\n            </div>\n        </div>\n    "},aAddClassFn=function(){$("a").each(function(n,t){t=$(t);"_blank"==t.attr("target")&&t.addClass("link external")})},TXT_nourl="\x3c!-- 暂无标题链接 --\x3e",TXT_notitle="\x3c!-- 暂无标题 --\x3e",TXT_nopic="\x3c!-- 暂无图片 / --\x3e",tp={pic:function(n){return isTalkinghomepage&&(n.LinkUrl="http://www.xinhuanet.com/talking/djlx/"),'<div class="pic" data-docid="'+n.DocID+'">'+(n.PicLinks?(n.LinkUrl?'<a href="'+n.LinkUrl+'" class="link external" target="_blank" data-docid="'+n.DocID+'">':TXT_nourl)+'<img class="lazy lazy-fade-in" src="'+n.PicLinks+'" alt="'+(n.Title?""+n.Title:TXT_notitle)+'">'+(n.LinkUrl?"</a>":""):TXT_nopic)+"</div>"},picNoImgNoPicDom:function(n){return isTalkinghomepage&&(n.LinkUrl="http://www.xinhuanet.com/talking/djlx/"),(n.PicLinks?'\n            <div class="pic" data-docid="'+n.DocID+'">'+(n.LinkUrl?'<a href="'+n.LinkUrl+'" class="link external" target="_blank" data-docid="'+n.DocID+'">':TXT_nourl)+'<img class="lazy lazy-fade-in" src="'+n.PicLinks+'" alt="'+(n.Title?""+n.Title:TXT_notitle)+'">'+(n.LinkUrl?"</a></div>":""):TXT_nopic)+"\n       "},aImg:function(n){return isTalkinghomepage&&(n.LinkUrl="http://www.xinhuanet.com/talking/djlx/"),(n.PicLinks?(n.LinkUrl?'<a href="'+n.LinkUrl+'" class="link external" target="_blank" data-docid="'+n.DocID+'">':TXT_nourl)+'<img class="lazy lazy-fade-in" data-docid="'+n.DocID+'" src="'+n.PicLinks+'" alt="'+(n.Title?""+n.Title:TXT_notitle)+'">'+(n.LinkUrl?"</a>":""):TXT_nopic)+"</div>"},title:function(n){return isTalkinghomepage&&(n.LinkUrl="http://www.xinhuanet.com/talking/djlx/"),""+(n.LinkUrl?'<a href="'+n.LinkUrl+'" class="link external" target="_blank" data-docid="'+n.DocID+'">':TXT_nourl)+(n.Title?""+n.Title:TXT_notitle)+(n.LinkUrl?"</a>":"")},a:{start:function(n){return isTalkinghomepage&&(n.LinkUrl="http://www.xinhuanet.com/talking/djlx/"),""+(n.LinkUrl?'<a href="'+n.LinkUrl+'" class="link external" target="_blank" data-docid="'+n.DocID+'">':TXT_nourl)},end:function(n){return n.LinkUrl?"</a>":""}},abs:function(n){return n.Abstract?'<div class="abs" data-docid="'+n.DocID+'">'+n.Abstract+"</div>":'\x3c!-- 暂无摘要 data-docid="'+n.DocID+'" --\x3e'},introTitle:function(n){var t=/http/.test(n.IntroTitle);return n.IntroTitle&&0==t?'<div class="bigTitle" data-type="IntroTitle">'+n.IntroTitle+"</div>":'\x3c!-- 暂无引题 data-docid="'+n.DocID+'" --\x3e'},date:function(n){n=n.PubTime.split(" ")[0].split("-");return n[0]+"年"+n[1]+"月"+n[2]+"日"}},pageFn=function(n,t){var a=t.cnt,i=t.pgnum;$("#addData"+n).on("click",function(){n&&i++,loadDataListItem({cid:n,cnt:a,pgnum:i,isBlank:!0})})},loadContnet=function(n){loadContnetHandler({cid:cid[n].cid,cnt:10,pgnum:1,targetName:'[data-add="addDataPos"]'})},loadContnetHandler=function(n){var t=n.cid,e=n.cnt,l=n.pgnum,o=n.targetName,a=n.attr,n=n.noAttr,c=a||62,s=n||!1;$.ajax({url:AJAX_url,data:{nid:t,pgnum:l,cnt:e,tp:1,orderby:1},dataType:"JSONP",success:function(n){var a,i=msgFn({cid:t,pgnum:l,cnt:e});"-1"==n.status?o&&$(o+" .isNoContent").addClass("noAni").html(i):0<n.data.list.length&&(a="",n.data.list.map(function(n,t){s||n.Attr==c?a+="\n                                "+(n.Title&&"隐藏标题"!==n.Title?"<p><strong>"+n.Title+"</strong></p>":"")+"\n                                "+(n.Abstract?"<p>"+n.Abstract+"</p>":"")+"\n                            ":$(o+" .isNoContent").addClass("noAni").html(i).append('<div class="tips">缺少属性 '+c+" 的稿件！</div>")}),$(o).html('\n                        <div class="isContent">\n                            <div class="content">\n                                <div class="setUrlDom-domHtml">\n                                    '+a+"\n                                </div>\n                            </div>\n                        </div>"))}})},getRandomInt=function(n){return Math.floor(Math.random()*Math.floor(n))},setUrlDom=function(n){var i=n.targetName,t=n.url,n=t.split("/").slice(-1),e=t.replace(n,"");$.ajax({url:t,type:"get",success:function(n){n=n.replace(/(<p align="center">)?<img([\s\S]+?)src=['"]([^'"]+)['"]([\s\S]+?)>(<\/p>)?/gi,function(){return arguments.length<=3||!arguments[3]||/http/.test(arguments.length<=3?void 0:arguments[3])?'<img src="'+(arguments.length<=3?void 0:arguments[3])+'">':'<img src="'+e+(arguments.length<=3?void 0:arguments[3])+'" width="100%" height="auto">'});var t=$(n),a=$(".main-content-box",t);0==a.length&&((a=$(".main",t)).find("h1").remove(),a.find(".m-info.domMobile").remove(),a.find(".author").remove(),a.find(".keyword").remove());n=a.html()||"<p>暂无正文</p>",$(".main h1",t),$(".main > .m-info",t),a=$.trim($(".video-url",t).text()),t=/\?mp3/.test(a),t=a&&0==t;$(""+i).html('\n                    <div class="isContent">\n                        <div class="content">\n                            <div class="setUrlDom-domHtml">\n                                '+n+"\n                            </div>\n                        </div>\n                    </div>"),$(""+i).find(".setUrlDom-domHtml a").each(function(n,t){t=$(t);t.css({width:"auto"}),t.attr("title",$.trim(t.text())),t.addClass("link external");t.attr("href").replace(/\.\.\/\.\.\//g,"http://www.xiongan.gov.cn/")}),t&&$(".pageVideo").hide()}})},rotAndHeadlineWithBigTitleNoList_initRot=function(n){new Swiper(n+" .swiper-container",{loop:!0,watchOverflow:!0,pagination:{el:n+" .swiper-pagination",clickable:!0},navigation:{nextEl:n+" .swiper-button-next",prevEl:n+" .swiper-button-prev"}})},rotAndHeadlineWithBigTitleNoList=function(n){var o=n.cid,c=n.cnt,s=n.pgnum,d=n.targetName,r=n.rightSideItemMax;$.ajax({url:AJAX_url,data:{nid:o,pgnum:s,cnt:c,tp:1,orderby:1},dataType:"JSONP",success:function(n){var t,a="",i="",e="",l=0;"-1"==n.status?(t=msgFn({cid:o,pgnum:s,cnt:c}),$(d+" .isNoContent").html(t)):0<n.data.list.length&&n.data.list.map(function(n,t){62==n.Attr&&(a="\n                                \x3c!-- topBigTitle START --\x3e\n                                "+(n.LinkUrl?'<h1><a href="'+n.LinkUrl+'" target="_blank" class="link external">':"\x3c!-- 暂无主标题链接 --\x3e")+"\n                                "+(n.Title||"\x3c!-- 暂无主标题 --\x3e")+"\n                                "+(n.LinkUrl?"</a></h1 >":"\x3c!-- 暂无主标题链接 --\x3e")+"\n                                "+(n.Abstract?'<div class="absBox">'+n.Abstract+"</div>":"\x3c!-- 暂无摘要 --\x3e")+"\n                                \x3c!-- topBigTitle END --\x3e"),61==n.Attr&&(i+='\n                                <div class="swiper-slide item" data-docid="'+n.DocID+'">\n                                    '+tp.pic(n,t)+'\n                                    <div class="title">\n                                        <div class="text">\n                                            '+tp.title(n,t)+"\n                                        </div>\n                                    </div>\n                                </div>\n                            "),63==n.Attr&&l<r&&(l++,e+='\n                                <h2 class="tiny-title" data-docid="'+n.DocID+'">\n                                    '+tp.title(n,t)+"\n                                </h2>\n                                "+tp.abs(n)+"\n                            ",l<=r-1&&(e+='<div class="line"></div>'))}),a&&$(d+" .topBigTitle").html(a),i&&($(d+" .swiper-wrapper").html(i),rotAndHeadlineWithBigTitleNoList_initRot(d)),i||e?$(".col1 .right").html("\n                    "+e+"\n                "):$(".col1 .area").hide()},error:function(n,t,a){404==n.status&&($(".topBigTitle .isNoContent"+o).html(a),$(".col1 .isNoContent"+o).html(a))}})},addDataForHomepage=function(n){var t,i,e,l,o,c,s,d,r,p,m=function(n,t){var a=t.dom,i=t.cid,e=t.cnt,t=t.pgnum;$(".isLoading").html("").removeClass("isLoading");var l="";a.map(function(n,t){var a=tp.a.start(n),i=tp.a.end(n);l+='<li data-index="'+t+'" data-docid="'+n.DocID+'"'+(n.PicLinks?"":'class="noPic"')+">\n                "+tp.pic(n)+'\n                <div class="text">\n                    '+a+'\n                        <div class="title">\n                            '+(n.Title?""+n.Title:"暂无标题")+'\n                        </div>\n                        <div class="title2">\n                            <div class="date">'+tp.date(n)+'</div>\n                            <div class="more">查看详情</div>\n                        </div>\n                    '+i+"\n                </div>\n            </li>"}),n?$(n).html("\n                    \x3c!-- cid: "+i+", cnt: "+e+", pgnum: "+t+" START --\x3e\n                    "+l+"\n                    \x3c!-- cid: "+i+", cnt: "+e+", pgnum: "+t+" END --\x3e\n                "):$("#addDataListPos").append("\n                    \x3c!-- cid: "+i+", cnt: "+e+", pgnum: "+t+" START --\x3e\n                    "+l+"\n                    \x3c!-- cid: "+i+", cnt: "+e+", pgnum: "+t+" END --\x3e\n                ")};t={cid:n[0].cid,cnt:2e3,pgnum:1,targetName:"#addDataListPos"},i=t.cid,e=t.cnt,l=t.pgnum,o=t.targetName,d={0:[]},r=s=c=0,p="",$.ajax({url:AJAX_url,data:{nid:i,pgnum:l,cnt:e,tp:1,orderby:1},dataType:"JSONP",success:function(n){var t,a;"-1"==n.status?($("#addData").html("暂无更多").addClass("disable"),t=msgFn({cid:i,pgnum:l,cnt:e}),(o?$(o+" .isNoContent"):$(".isNoContent"+i)).html(t)):0<n.data.list.length&&(n.data.list.map(function(n,t){isTalkinghomepage&&(n.LinkUrl="http://www.xinhuanet.com/talking/djlx/"),61==n.Attr?r<3&&(p+='<div class="swiper-slide item-rightPicTitleAbs">\n                                        <div class="item-rightPicTitleAbs-in">\n                                            '+tp.pic(n)+'\n                                            <div class="textBox">\n                                                <div class="title">\n                                                    <div class="text-in">\n                                                        '+tp.title(n)+'\n                                                    </div>\n                                                </div>\n                                                <div class="abs">\n                                                    <div class="text-in">\n                                                        '+tp.abs(n)+'\n                                                    </div>\n                                                </div>\n                                                <a class="link external item-rightPicTitleAbs-more" target="_blank" href="'+n.LinkUrl+'">详情</a>\n                                            </div>\n                                        </div>\n                                    </div>',r++):(d[s].push(n),c<8?c++:(s++,0==d.hasOwnProperty(s)&&(d[s]=[]),c=0))}),n="#rotBox61",$(n+" .swiper-wrapper").html("\n                                \x3c!-- cid: "+i+", cnt: "+e+", pgnum: "+l+" START --\x3e\n                                "+p+"\n                                \x3c!-- cid: "+i+", cnt: "+e+", pgnum: "+l+" END --\x3e\n                            "),0==!(n=n)&&(isPc?new Swiper(n+" .swiper-container",{loop:!0,speed:1500,autoplay:!isDev&&{delay:3e3},watchOverflow:!0,pagination:{el:n+" .swiper-pagination",clickable:!0},navigation:{nextEl:n+" .swiper-button-next",prevEl:n+" .swiper-button-prev"},effect:"coverflow",centeredSlides:!0,coverflowEffect:{rotate:30,stretch:40,depth:80,modifier:3,slideShadows:!1},preventClicks:!1}):new Swiper(n+" .swiper-container",{loop:!0,watchOverflow:!0,spaceBetween:20,pagination:{el:n+" .swiper-pagination",clickable:!0}})),m(o,{dom:d[a=0],cid:i,cnt:e,pgnum:l}),$("#addData").on("click",function(){a++,d.hasOwnProperty(a)?m(!1,{dom:d[a],cid:i,cnt:e,pgnum:l}):($(".isNoContent.isNoContent").html("暂无更多"),$("#addData").addClass("disable").off("click"))}))}})},setHomepageColByName=function(){for(var n in cidMap.byName){var t=cidMap.byName[n],a=t.cid|t,t=$('[data-setUrl="'+n+'"]');t.replaceWith('\n            <a class="colA link" href="/page/'+a+'">\n                <div class="'+t.attr("class")+'">\n                    <div class="colATxt">'+txtSplitByDash(n)+"</div>\n                </div>\n            </a>\n        ");t=$('[data-more="'+n+'"]');t.replaceWith('\n            <div class="more">\n                <a class="colA link" href="/page/'+a+'"> '+t.html()+" </a>\n            </div>\n        ")}},setPageChildNavDomFn=function(n){var t="";return(n.child||[]).map(function(n){t+='\n            <div class="item" data-childitem="childNav-'+n.cid+'">\n                <a class="colA link" data-childitem="childNav-'+n.cid+'" href="/page/'+n.cid+'" > '+n.name+" </a>\n            </div>\n        "}),t},findFather=function(t){var a=void 0,i=!0;return cid.map(function(n){n.cid==t==0&&i&&n.hasOwnProperty("child")&&n.child&&(a=n).child.map(function(n){n.cid==t&&(i=!1)})}),a},setCol_setTimeout=void 0,routes=[{name:"首页",path:MAIN_url,url:".",on:{pageInit:function(){setNav(cid),addDataForHomepage(cid),aAddClassFn()}}},{path:"(.*)",url:"http://www.news.cn/404.html"}],theme="auto";0<=document.location.search.indexOf("theme=")&&(theme=document.location.search.split("theme=")[1].split("&")[0]);var app=new Framework7({root:"#app",name:"xiongan",id:"com.myapp.test",panel:{swipe:"left"},routes:routes,popup:{closeOnEscape:!0},sheet:{closeOnEscape:!0},popover:{closeOnEscape:!0},actions:{closeOnEscape:!0}}),mainView=app.views.create(".view-main",{pushState:!0,on:{pageAfterIn:function(){$(".listBoxMoreBtn").click(),isTalkinghomepage&&$("a").href("href","http://www.xinhuanet.com/talking/djlx/")}}}),setFooter=function(){var n=(new Date).getFullYear();$(".footer .footer-in2 .text6 span").text(n)}();